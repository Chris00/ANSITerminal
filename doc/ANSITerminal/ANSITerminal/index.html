<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>ANSITerminal (ANSITerminal.ANSITerminal)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../index.html">ANSITerminal</a> &#x00BB; ANSITerminal</nav><header class="odoc-preamble"><h1>Module <code><span>ANSITerminal</span></code></h1><p>This module offers basic control of ANSI compliant terminals and the windows shell.</p><p>The functions below do not send ANSI codes (i.e., do nothing or only print the output) when then output is not connected to a TTY. Functions providing information (such as <a href="#val-pos_cursor"><code>pos_cursor</code></a>) fail when in that situation. TTY detection is configurable by changing the value of <a href="#val-isatty"><code>isatty</code></a>.</p><p>This library is not thread safe.</p><ul class="at-tags"><li class="author"><span class="at-tag">author</span> Christophe Troestler (Christophe.Troestler@umons.ac.be)</li></ul><ul class="at-tags"><li class="author"><span class="at-tag">author</span> Vincent Hugot (vincent.hugot@gmail.com)</li></ul></header><nav class="odoc-toc"><ul><li><a href="#colors-and-style">Colors and style</a></li><li><a href="#erasing">Erasing</a></li><li><a href="#cursor">Cursor</a></li><li><a href="#size">Size</a></li><li><a href="#scrolling">Scrolling</a></li><li><a href="#tty">TTY</a></li></ul></nav><div class="odoc-content"><h3 id="colors-and-style"><a href="#colors-and-style" class="anchor"></a>Colors and style</h3><div class="odoc-spec"><div class="spec type" id="type-color" class="anchored"><a href="#type-color" class="anchor"></a><code><span><span class="keyword">type</span> color</span><span> = </span></code><table><tr id="type-color.Black" class="anchored"><td class="def variant constructor"><a href="#type-color.Black" class="anchor"></a><code><span>| </span><span><span class="constructor">Black</span></span></code></td></tr><tr id="type-color.Red" class="anchored"><td class="def variant constructor"><a href="#type-color.Red" class="anchor"></a><code><span>| </span><span><span class="constructor">Red</span></span></code></td></tr><tr id="type-color.Green" class="anchored"><td class="def variant constructor"><a href="#type-color.Green" class="anchor"></a><code><span>| </span><span><span class="constructor">Green</span></span></code></td></tr><tr id="type-color.Yellow" class="anchored"><td class="def variant constructor"><a href="#type-color.Yellow" class="anchor"></a><code><span>| </span><span><span class="constructor">Yellow</span></span></code></td></tr><tr id="type-color.Blue" class="anchored"><td class="def variant constructor"><a href="#type-color.Blue" class="anchor"></a><code><span>| </span><span><span class="constructor">Blue</span></span></code></td></tr><tr id="type-color.Magenta" class="anchored"><td class="def variant constructor"><a href="#type-color.Magenta" class="anchor"></a><code><span>| </span><span><span class="constructor">Magenta</span></span></code></td></tr><tr id="type-color.Cyan" class="anchored"><td class="def variant constructor"><a href="#type-color.Cyan" class="anchor"></a><code><span>| </span><span><span class="constructor">Cyan</span></span></code></td></tr><tr id="type-color.White" class="anchored"><td class="def variant constructor"><a href="#type-color.White" class="anchor"></a><code><span>| </span><span><span class="constructor">White</span></span></code></td></tr><tr id="type-color.Default" class="anchored"><td class="def variant constructor"><a href="#type-color.Default" class="anchor"></a><code><span>| </span><span><span class="constructor">Default</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Default color of the terminal</p><span class="comment-delim">*)</span></td></tr></table></div><div class="spec-doc"><p>Available colors.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-style" class="anchored"><a href="#type-style" class="anchor"></a><code><span><span class="keyword">type</span> style</span><span> = </span></code><table><tr id="type-style.Reset" class="anchored"><td class="def variant constructor"><a href="#type-style.Reset" class="anchor"></a><code><span>| </span><span><span class="constructor">Reset</span></span></code></td></tr><tr id="type-style.Bold" class="anchored"><td class="def variant constructor"><a href="#type-style.Bold" class="anchor"></a><code><span>| </span><span><span class="constructor">Bold</span></span></code></td></tr><tr id="type-style.Underlined" class="anchored"><td class="def variant constructor"><a href="#type-style.Underlined" class="anchor"></a><code><span>| </span><span><span class="constructor">Underlined</span></span></code></td></tr><tr id="type-style.Blink" class="anchored"><td class="def variant constructor"><a href="#type-style.Blink" class="anchor"></a><code><span>| </span><span><span class="constructor">Blink</span></span></code></td></tr><tr id="type-style.Inverse" class="anchored"><td class="def variant constructor"><a href="#type-style.Inverse" class="anchor"></a><code><span>| </span><span><span class="constructor">Inverse</span></span></code></td></tr><tr id="type-style.Hidden" class="anchored"><td class="def variant constructor"><a href="#type-style.Hidden" class="anchor"></a><code><span>| </span><span><span class="constructor">Hidden</span></span></code></td></tr><tr id="type-style.Foreground" class="anchored"><td class="def variant constructor"><a href="#type-style.Foreground" class="anchor"></a><code><span>| </span><span><span class="constructor">Foreground</span> <span class="keyword">of</span> <a href="#type-color">color</a></span></code></td></tr><tr id="type-style.Background" class="anchored"><td class="def variant constructor"><a href="#type-style.Background" class="anchor"></a><code><span>| </span><span><span class="constructor">Background</span> <span class="keyword">of</span> <a href="#type-color">color</a></span></code></td></tr></table></div><div class="spec-doc"><p>Various styles for the text. <code>Blink</code> and <code>Hidden</code> may not work on every terminal.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-black" class="anchored"><a href="#val-black" class="anchor"></a><code><span><span class="keyword">val</span> black : <a href="#type-style">style</a></span></code></div><div class="spec-doc"><p>Shortcut for <code>Foreground Black</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-red" class="anchored"><a href="#val-red" class="anchor"></a><code><span><span class="keyword">val</span> red : <a href="#type-style">style</a></span></code></div><div class="spec-doc"><p>Shortcut for <code>Foreground Red</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-green" class="anchored"><a href="#val-green" class="anchor"></a><code><span><span class="keyword">val</span> green : <a href="#type-style">style</a></span></code></div><div class="spec-doc"><p>Shortcut for <code>Foreground Green</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-yellow" class="anchored"><a href="#val-yellow" class="anchor"></a><code><span><span class="keyword">val</span> yellow : <a href="#type-style">style</a></span></code></div><div class="spec-doc"><p>Shortcut for <code>Foreground Yellow</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-blue" class="anchored"><a href="#val-blue" class="anchor"></a><code><span><span class="keyword">val</span> blue : <a href="#type-style">style</a></span></code></div><div class="spec-doc"><p>Shortcut for <code>Foreground Blue</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-magenta" class="anchored"><a href="#val-magenta" class="anchor"></a><code><span><span class="keyword">val</span> magenta : <a href="#type-style">style</a></span></code></div><div class="spec-doc"><p>Shortcut for <code>Foreground Magenta</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-cyan" class="anchored"><a href="#val-cyan" class="anchor"></a><code><span><span class="keyword">val</span> cyan : <a href="#type-style">style</a></span></code></div><div class="spec-doc"><p>Shortcut for <code>Foreground Cyan</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-white" class="anchored"><a href="#val-white" class="anchor"></a><code><span><span class="keyword">val</span> white : <a href="#type-style">style</a></span></code></div><div class="spec-doc"><p>Shortcut for <code>Foreground White</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-default" class="anchored"><a href="#val-default" class="anchor"></a><code><span><span class="keyword">val</span> default : <a href="#type-style">style</a></span></code></div><div class="spec-doc"><p>Shortcut for <code>Foreground Default</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-on_black" class="anchored"><a href="#val-on_black" class="anchor"></a><code><span><span class="keyword">val</span> on_black : <a href="#type-style">style</a></span></code></div><div class="spec-doc"><p>Shortcut for <code>Background Black</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-on_red" class="anchored"><a href="#val-on_red" class="anchor"></a><code><span><span class="keyword">val</span> on_red : <a href="#type-style">style</a></span></code></div><div class="spec-doc"><p>Shortcut for <code>Background Red</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-on_green" class="anchored"><a href="#val-on_green" class="anchor"></a><code><span><span class="keyword">val</span> on_green : <a href="#type-style">style</a></span></code></div><div class="spec-doc"><p>Shortcut for <code>Background Green</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-on_yellow" class="anchored"><a href="#val-on_yellow" class="anchor"></a><code><span><span class="keyword">val</span> on_yellow : <a href="#type-style">style</a></span></code></div><div class="spec-doc"><p>Shortcut for <code>Background Yellow</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-on_blue" class="anchored"><a href="#val-on_blue" class="anchor"></a><code><span><span class="keyword">val</span> on_blue : <a href="#type-style">style</a></span></code></div><div class="spec-doc"><p>Shortcut for <code>Background Blue</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-on_magenta" class="anchored"><a href="#val-on_magenta" class="anchor"></a><code><span><span class="keyword">val</span> on_magenta : <a href="#type-style">style</a></span></code></div><div class="spec-doc"><p>Shortcut for <code>Background Magenta</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-on_cyan" class="anchored"><a href="#val-on_cyan" class="anchor"></a><code><span><span class="keyword">val</span> on_cyan : <a href="#type-style">style</a></span></code></div><div class="spec-doc"><p>Shortcut for <code>Background Cyan</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-on_white" class="anchored"><a href="#val-on_white" class="anchor"></a><code><span><span class="keyword">val</span> on_white : <a href="#type-style">style</a></span></code></div><div class="spec-doc"><p>Shortcut for <code>Background White</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-on_default" class="anchored"><a href="#val-on_default" class="anchor"></a><code><span><span class="keyword">val</span> on_default : <a href="#type-style">style</a></span></code></div><div class="spec-doc"><p>Shortcut for <code>Background Default</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-set_autoreset" class="anchored"><a href="#val-set_autoreset" class="anchor"></a><code><span><span class="keyword">val</span> set_autoreset : <span>bool <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Turns the autoreset feature on and off. It defaults to on.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-print_string" class="anchored"><a href="#val-print_string" class="anchor"></a><code><span><span class="keyword">val</span> print_string : <span><span><a href="#type-style">style</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>print_string attr txt</code> prints the string <code>txt</code> with the attibutes <code>attr</code>. After printing, the attributes are automatically reseted to the defaults, unless autoreset is turned off.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-prerr_string" class="anchored"><a href="#val-prerr_string" class="anchor"></a><code><span><span class="keyword">val</span> prerr_string : <span><span><a href="#type-style">style</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Like <code>print_string</code> but prints on the standard error.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-printf" class="anchored"><a href="#val-printf" class="anchor"></a><code><span><span class="keyword">val</span> printf : <span><span><a href="#type-style">style</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, unit, string, unit)</span> <span class="xref-unresolved">Stdlib</span>.format4</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>printf attr format arg1 ... argN</code> prints the arguments <code>arg1</code>,...,<code>argN</code> according to <code>format</code> with the attibutes <code>attr</code>. After printing, the attributes are automatically reseted to the defaults, unless autoreset is turned off.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-eprintf" class="anchored"><a href="#val-eprintf" class="anchor"></a><code><span><span class="keyword">val</span> eprintf : <span><span><a href="#type-style">style</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, unit, string, unit)</span> <span class="xref-unresolved">Stdlib</span>.format4</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Same as <a href="#val-printf"><code>printf</code></a> but prints the result on <code>stderr</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-sprintf" class="anchored"><a href="#val-sprintf" class="anchor"></a><code><span><span class="keyword">val</span> sprintf : <span><span><a href="#type-style">style</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, unit, string)</span> <span class="xref-unresolved">Stdlib</span>.format</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Same as <a href="#val-printf"><code>printf</code></a> but returns the result in a string. This only works on ANSI compliant terminals — for which escape sequences are used — and not under Windows — where system calls are required. On Windows, it is identical to the standard <code>sprintf</code>.</p></div></div><h3 id="erasing"><a href="#erasing" class="anchor"></a>Erasing</h3><div class="odoc-spec"><div class="spec type" id="type-loc" class="anchored"><a href="#type-loc" class="anchor"></a><code><span><span class="keyword">type</span> loc</span><span> = </span></code><table><tr id="type-loc.Eol" class="anchored"><td class="def variant constructor"><a href="#type-loc.Eol" class="anchor"></a><code><span>| </span><span><span class="constructor">Eol</span></span></code></td></tr><tr id="type-loc.Above" class="anchored"><td class="def variant constructor"><a href="#type-loc.Above" class="anchor"></a><code><span>| </span><span><span class="constructor">Above</span></span></code></td></tr><tr id="type-loc.Below" class="anchored"><td class="def variant constructor"><a href="#type-loc.Below" class="anchor"></a><code><span>| </span><span><span class="constructor">Below</span></span></code></td></tr><tr id="type-loc.Screen" class="anchored"><td class="def variant constructor"><a href="#type-loc.Screen" class="anchor"></a><code><span>| </span><span><span class="constructor">Screen</span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec value" id="val-erase" class="anchored"><a href="#val-erase" class="anchor"></a><code><span><span class="keyword">val</span> erase : <span><a href="#type-loc">loc</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>erase Eol</code> clear from the cursor position to the end of the line without moving the cursor. <code>erase Above</code> erases everything before the position of the cursor. <code>erase Below</code> erases everything after the position of the cursor. <code>erase Screen</code> erases the whole screen.</p><p>This function does not modify the position of the cursor.</p></div></div><h3 id="cursor"><a href="#cursor" class="anchor"></a>Cursor</h3><div class="odoc-spec"><div class="spec value" id="val-set_cursor" class="anchored"><a href="#val-set_cursor" class="anchor"></a><code><span><span class="keyword">val</span> set_cursor : <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>set_cursor x y</code> puts the cursor at position <code>(x,y)</code>, <code>x</code> indicating the column (the leftmost one being 1) and <code>y</code> being the line (the topmost one being 1). If <code>x &lt;= 0</code>, the <code>x</code> coordinate is unchanged; if <code>y &lt;= 0</code>, the <code>y</code> coordinate is unchanged.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-move_cursor" class="anchored"><a href="#val-move_cursor" class="anchor"></a><code><span><span class="keyword">val</span> move_cursor : <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>move_cursor x y</code> moves the cursor by <code>x</code> columns (to the right if <code>x &gt; 0</code>, to the left if <code>x &lt; 0</code>) and by <code>y</code> lines (downwards if <code>y &gt; 0</code> and upwards if <code>y &lt; 0</code>).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-move_bol" class="anchored"><a href="#val-move_bol" class="anchor"></a><code><span><span class="keyword">val</span> move_bol : <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>move_bol()</code> moves the cursor to the beginning of the current line. This is useful for progress bars for example.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pos_cursor" class="anchored"><a href="#val-pos_cursor" class="anchor"></a><code><span><span class="keyword">val</span> pos_cursor : <span>unit <span class="arrow">&#45;&gt;</span></span> int * int</span></code></div><div class="spec-doc"><p><code>pos_cursor()</code> returns a couple <code>(x,y)</code> giving the current position of the cursor, <code>x &gt;= 1</code> being the column and <code>y &gt;= 1</code> the row.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-save_cursor" class="anchored"><a href="#val-save_cursor" class="anchor"></a><code><span><span class="keyword">val</span> save_cursor : <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>save_cursor()</code> saves the current position of the cursor.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-restore_cursor" class="anchored"><a href="#val-restore_cursor" class="anchor"></a><code><span><span class="keyword">val</span> restore_cursor : <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>restore_cursor()</code> replaces the cursor to the position saved with <code>save_cursor()</code>.</p></div></div><h3 id="size"><a href="#size" class="anchor"></a>Size</h3><div class="odoc-spec"><div class="spec value" id="val-resize" class="anchored"><a href="#val-resize" class="anchor"></a><code><span><span class="keyword">val</span> resize : <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>resize width height</code> resize the current terminal to the given <code>width</code> and <code>height</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-size" class="anchored"><a href="#val-size" class="anchor"></a><code><span><span class="keyword">val</span> size : <span>unit <span class="arrow">&#45;&gt;</span></span> int * int</span></code></div><div class="spec-doc"><p><code>size()</code> returns a pair <code>(width, height)</code> giving the size of the terminal in character cells.</p></div></div><h3 id="scrolling"><a href="#scrolling" class="anchor"></a>Scrolling</h3><div class="odoc-spec"><div class="spec value" id="val-scroll" class="anchored"><a href="#val-scroll" class="anchor"></a><code><span><span class="keyword">val</span> scroll : <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>scroll n</code> scrolls the terminal by <code>n</code> lines, up (creating new lines at the bottom) if <code>n &gt; 0</code> and down if <code>n &lt; 0</code>.</p></div></div><h3 id="tty"><a href="#tty" class="anchor"></a>TTY</h3><div class="odoc-spec"><div class="spec value" id="val-isatty" class="anchored"><a href="#val-isatty" class="anchor"></a><code><span><span class="keyword">val</span> isatty : <span><span>(<span><span class="xref-unresolved">Unix</span>.file_descr <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div><div class="spec-doc"><p>Function used to detect whether the current output is connected to a TTY. Defaults to <code>Unix.isatty</code>.</p></div></div></div></body></html>